<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1, shrink-to-fit=0, user-scalable=0"
      />
      <meta name="Description" content="PWA WORKSHOP" />
      <meta name="Description" content="Author: YOU" />
      <link type="text/css" href="./css/pwa-course.css" rel="stylesheet" />
      <!-- $PWA -->
      <link rel="manifest" href="./manifest.json" />
      <title>FALLBACK 1</title>
      <!-- The theme-color value for the name attribute of the meta element indicates a suggested color that user agents should use to customize the display of the page or of the surrounding user interface. If specified, the content attribute must contain a valid CSS color. -->
      <meta name="theme-color" content="#2196f3" />
      <!-- Apple -->
      <meta name="apple-mobile-web-app-title" content="wpPWA" />
      <meta name="apple-mobile-web-app-capable" content="yes" />
      <meta name="apple-mobile-web-app-status-bar-style" content="black" />
      <!-- or translucent -->
      <link rel="apple-touch-startup-image" href="./images/wppwa.png" />
      <link
         rel="apple-touch-icon"
         sizes="180x180"
         href="./images-manifest/apple-touch-icon-180x180.png"
      />
      <link rel="icon" type="image/png" href="./images-manifest/icon-144x144.png" sizes="144x144" />
      <!-- Microsoft -->
      <meta name="msapplication-TileColor" content="#2D91F8" />
      <meta name="msapplication-TileImage" content="./images-manifest/icons/ms-icon-144x144.png" />
      <title>ARTICLE</title>
   </head>

   <body>
      <nav class="navbar">
         <div>
            <img
               src="./images/offline.png"
               id="offline-image"
               style="display: none; width: 30px; color: white; height: 30px; margin-left: 10px"
               alt="offline image"
            />
         </div>
         <div class="navbar-links">
            <ul>
               <li><a href="index.html">HOME</a></li>
               <li><a href="articles.html">POSTS</a></li>
               <li><a href="contacts.html">CONTACTS</a></li>
               <li><a href="form.html">FORM</a></li>
            </ul>
         </div>
      </nav>

      <main>
         <div class="card">
            <h2><a href="articles.html">BACK TO ARTICLES</a></h2>
            <div id="mainContent"></div>
         </div>
         <br />
      </main>

      <!-- IndexedDB LIBRARY -->
      <script src="./js/idb.js"></script>
      <!-- IndexedDB UTILITY FUNCTIONS -->
      <script src="./js/idb-fn.js"></script>
      <!-- REQEUST NOTIFICATIONS PERMISSION -->

      <!-- LOAD ARTICLE -->
      <script>
         let urlParams = new URLSearchParams(window.location.search); //?id=22
         console.log(urlParams.get('id'));
         let id = parseInt(urlParams.get('id'), 10); // fails without parseInt as idb-fn.js does not recognise id

         getData('wpPOSTS', id).then(function (data) {
            var output = '';
            //console.log(data);
            //console.log("ID is " + data.id + "and title is " + data.title + " with content " + data.body);
            output += '<h2>Article number: ' + data.id + '</h2>';
            output += '<h2>Title: <b>' + data.title + '</b></h2>';
            output += '<p>' + data.body + '</p><br>';

            document.getElementById('mainContent').innerHTML = output;
         });
      </script>

      <footer>
         <div class="w3-container w3-blue w3-center footer">
            <p>PWA WORKSHOP - &copy; Craig West 2020</p>
         </div>
      </footer>
      <!-- MAINTAIN OFFLINE STYLE WHEN NAVIGATING OFFLINE -->
      <script src="./js/is-offline.js"></script>
      <!-- RESPOND TO CHANGE IN ONLINE?OFFLINE -->
      <script src="./js/gone-offline.js"></script>
   </body>
</html>
